

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using SPPS within I-Simpa &mdash; I-Simpa 1.3.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="General principle" href="code_SPPS_principle.html" />
    <link rel="prev" title="Presentation" href="code_SPPS.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> I-Simpa
          

          
          </a>

          
            
            
              <div class="version">
                1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">I-Simpa Presentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="I_Simpa_overview.html">I-Simpa overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="I_Simpa_overview.html#i-simpa-features">I-Simpa features</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial_teaching_room.html">Study of a teaching room</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_Elmia_hall.html">Study of the Elmia hall</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_industrial_hall.html">Study of an industrial room</a></li>
</ul>
<p class="caption"><span class="caption-text">I-Simpa User Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">(Un)Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="presentation.html">GUI Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="menus.html">Menus</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolbars.html">Toolbars</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_window.html">‘Project’ window</a></li>
<li class="toctree-l1"><a class="reference internal" href="properties_window.html">‘Properties’ window</a></li>
<li class="toctree-l1"><a class="reference internal" href="console_window.html">‘Console’ window</a></li>
<li class="toctree-l1"><a class="reference internal" href="main_windows.html">‘Main’ window</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_database.html">Project database</a></li>
</ul>
<p class="caption"><span class="caption-text">Thematics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="import_options.html">Import options</a></li>
<li class="toctree-l1"><a class="reference internal" href="import_file_recommandations.html">Recommendations to import a 3D scene</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_spectrum.html">Define and use spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="define_position.html">Define a position using the pointer on the 3D view</a></li>
<li class="toctree-l1"><a class="reference internal" href="surface_selection.html">Surface selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="manipulate_sources_receivers.html">Manipulating sources and receivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_directivity.html">Using directivity</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_charts.html">Creating charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_charts.html#chart-options">Chart Options</a></li>
</ul>
<p class="caption"><span class="caption-text">SPPS Code</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="code_SPPS.html">Presentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using SPPS within I-Simpa</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#frequency-bands">Frequency bands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meshing">Meshing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculation-parameters">Calculation parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#computational-time-optimization">Computational time optimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="code_SPPS_principle.html">General principle</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_SPPS_modelling.html">Modelling of physical phenomena in <strong>SPPS</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">TCR Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code_TCR.html">Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_configuration_TCR.html">Using TCR within I-Simpa</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="I_Simpa_standard.html">Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">I-Simpa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using SPPS within I-Simpa</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/code_configuration_SPPS.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-spps-within-i-simpa">
<h1>Using SPPS within I-Simpa<a class="headerlink" href="#using-spps-within-i-simpa" title="Permalink to this headline">¶</a></h1>
<p>SPPS is already embedded in I-Simpa. Follow the next instructions to run a calculation with the SPPS code in I-Simpa.</p>
<p><strong>Double left click</strong> on the TCR calculation code in I-Simpa to display all calculation paramaters:</p>
<ul class="simple">
<li><a class="reference internal" href="#frequency-bands">Frequency bands</a> for the selection of the frequency band to be used for the calculation</li>
<li><a class="reference internal" href="#meshing">Meshing</a> for the meshing configuration</li>
<li><a class="reference internal" href="#calculation-parameters">Calculation parameters</a> for the calculation parameters</li>
</ul>
<p><strong>Right click</strong> on the selected calculation code to display all possible actions:</p>
<ul class="simple">
<li>Run calculation</li>
<li>Job list</li>
</ul>
<div class="section" id="frequency-bands">
<h2>Frequency bands<a class="headerlink" href="#frequency-bands" title="Permalink to this headline">¶</a></h2>
<p>This allows to define the frequency band that will be used for the calculation. This can be done:</p>
<ul>
<li><p class="first">by <em>hand</em>, by checking/unchecking the frequency to be considered;</p>
</li>
<li><p class="first"><em>automatically</em> (‘Automatic selection’), by using the contextual menu on the element ‘Frequency band’ of the chossen code:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>‘Unselect all’</dt>
<dd>Uncheck all frequency bands.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Select all’</dt>
<dd>Check all frequency bands.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Octave’</dt>
<dd>Check third ocave bands that are centred on the corresponding octave bands.<ul class="last">
<li><dl class="first docutils">
<dt>‘All’</dt>
<dd>All octave bands on the whole frequency range</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Building/Road’</dt>
<dd>All octave bands between 125Hz and 4000Hz.</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Third octaves’</dt>
<dd>Check the third octave bands, considering.<ul class="last">
<li><dl class="first docutils">
<dt>‘All’</dt>
<dd>All thrid octave bands on the whole frequency range.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Building/Road’</dt>
<dd>All octave bands between 100Hz and 5000Hz.</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="meshing">
<h2>Meshing<a class="headerlink" href="#meshing" title="Permalink to this headline">¶</a></h2>
<p>Some calculation codes may require a meshing of the domain (SPPS for example). I-Simpa used the <a class="reference external" href="http://wias-berlin.de/software/tetgen/">TetGen meshing code (A Quality Tetrahedral Mesh Generator and a 3D Delaunay Triangulator)</a>. See the documentation for more information.</p>
<p>Within I-Simpa, TetGen can be paramatrized:</p>
<ul>
<li><dl class="first docutils">
<dt>‘debugmode’</dt>
<dd><p class="first">Check/uncheck for activate the debug mode of TetGen;</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">With the debug mode, the meshing is not realized.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘minratio’</dt>
<dd><p class="first last">Defines the ratio between the radius of the sphere that would contain a mesh and the lenght of the mesh. This parameter could be useful in order to avoid long meshes.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘userdefineparams’</dt>
<dd><p class="first last">Defines new parameters by replacing default parameters.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘appendparams’</dt>
<dd><p class="first last">Add parameters to the dafault parameters.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘preprocess’</dt>
<dd><p class="first last">Check/uncheck for trying to repair the 3D scene if possible.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘maxvol’</dt>
<dd><p class="first last">Maximun accepted value of a mesh volume (m3). The value can be modified only if the ‘ismaxvol’ parameter is check.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘ismaxvol’</dt>
<dd><p class="first last">Check/uncheck for using a given maximum value of the mesh volume ‘maxvol’.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘constraintrecepteurss’</dt>
<dd><p class="first last">Maximun accepted value of the mesh surface (m2) for a surface receiver. The value can be modified only if the ‘isareaconstraint’ parameter is checked.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘isareaconstraint’.</dt>
<dd><p class="first last">Check/uncheck for using a given value of the mesh surface ‘constraintrecepteurss’.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="calculation-parameters">
<h2>Calculation parameters<a class="headerlink" href="#calculation-parameters" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>‘Active calculation of atmospheric absorption’</dt>
<dd><p class="first last">Enables calculation of atmospheric absorption.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Active calculation of diffusion by fitting objects’</dt>
<dd><p class="first">Enables calculation of calculation of diffusion by fitting objects.</p>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If fitting zones are enabled, by checking this option, it disables the calculation of all fitting zones. If you uncheck this option, the individual configuration of each fitting zone is preserved.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Active calculation of direct field only’</dt>
<dd><p class="first">Enables calculation of direct field only. There is no calculation of the reverberant field.</p>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This can be useful if you want to realize a first calculation, as a reference, of the direct field at receivers. The second calculation (direct and reverberant fields) can thus be calculated and compared to the direct field (first calculation).</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Active calculation transmission’</dt>
<dd><p class="first last">Enables calculation of transmission through walls.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Calculation method’</dt>
<dd><p class="first">Selects the calculation method.</p>
<blockquote class="last">
<div><ul class="simple">
<li><dl class="first docutils">
<dt>‘Random’</dt>
<dd>Select the Random method.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Energetic’</dt>
<dd>Select the Energetic method.</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Echogram per source’</dt>
<dd><p class="first last">Check to calculation an echogram for each sound source, for a given receiver. If uncheck, a global echogram is calculated by summing all source contributions.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Export surface receivers for each frequency band’</dt>
<dd><p class="first last">Check to export the surface receiver results, for each frequency band. If uncheck, only the global value is exported.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Limit value of the particle extinction: ratio 10^n’</dt>
<dd><p class="first last">For the ‘Energetic’ mode only. It defines a limit value of the particle energy. If the decrease of the particle energy is less than this value (<em>i.e.</em> the particle energy is very low), the particle is removed from the domain. For example, if n=60, it means that all particles whose energy will decreases to 60dB, will be removed.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Number of sound particles per source’</dt>
<dd><p class="first">Defines the number of sound particles that are generated by the source.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The computational time depends on the number of particles. If you increase the total number of particles, you drastically increase the computaional time.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Number of sound particles per source (display)’</dt>
<dd><p class="first">Defines the number of particles that are used for the particle animation.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Most of time, you need to consider only few hundreds or thousands particles for the animation. Incerasing this number, will decrease the memory resources.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Random initialization number’</dt>
<dd><p class="first">Initialize the random number series. If you select ‘0’, the random series will always be the same.</p>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Select ‘0’ if you want to repeat exactly the same computation.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Receiver radius (m)’</dt>
<dd><p class="first last">Defines the receiver radius (in m).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Simulation length (s)’</dt>
<dd><p class="first last">Defines the duration (in s) of the simulation.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Surface receiver export’</dt>
<dd><p class="first">Select the kind of results that is exported.</p>
<blockquote class="last">
<div><ul class="simple">
<li><dl class="first docutils">
<dt>‘Soundmap: intensity’</dt>
<dd>Intensity level (in dB).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Soundmap: SPL’</dt>
<dd>Sound pressure level (in dB).</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>‘Time step (s)’</dt>
<dd><p class="first last">Time step (in s) for the calculation.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="computational-time-optimization">
<h2>Computational time optimization<a class="headerlink" href="#computational-time-optimization" title="Permalink to this headline">¶</a></h2>
<p>The computationnal time depends mainly of the <strong>Number of sound particles per source</strong>. Thus, in the SPPS code, each sound particle is followed, at each ‘Time step’ during its propagation inside the 3D domain, experiencing absorption, reflection, diffusion… and so on, during the ‘Simulation length’ and/or untill the particles disapears when its energy is to small.</p>
<p>Considering a small number of sound particles may not produced relevant results to proceed an interesting acouctic analazis of the 3D model. Thus, it is necessary to consider a <em>large</em> number of sound particles. Assigning the good value for <em>large</em> is difficult and depends mainly on the scene size and the absorbent nature of the scene (surface absorption and volume absorption).</p>
<p>Few recommandations to evaluate the computationnal time:</p>
<ul class="simple">
<li>the number of sound particles defined in SPPS (‘Number of sound particles per source’ parameter) is defined for <strong>each sound source</strong>. Considering <em>N</em> sound particles per source and <em>M</em> sound sources will generate <em>N x M</em> sound particles in the domain;</li>
<li>one calculation is done for <strong>each frequency band</strong>: considering <em>F</em> frequency bands will be equivalent to a calculation with <em>F x N</em> sound particles for one source (or <em>F x N x M</em> for <em>M</em> sources). Note that, by default, the computation is paralleleized on the processor core, for each frequency band (a frequency band for a given core). So the increase of computional time with the nimber of frequency band is not linear;</li>
<li>in the <strong>‘Energetic’ mode</strong>, each sound particle is ‘alive’ during its propagation untill its energy is below a ratio of the initial energy (see ‘‘’Limit value of the particle extinction: ratio 10^n’ parameter). <strong>Increasing</strong> <em>n</em> will keep the sound particles longer in the domain, which increases the computational time;</li>
<li>in the <strong>‘Random’ mode</strong>, each physical phenomena (absorption, diffusion) is applied by considering probabilistic approaches. Using this mode, the computaional time is drastically decreased, but the quality of the results is aslo decrease. It is suggested to consider the ‘Random’ mode at the initial step of the study, and then to change to the ‘Energetic’ mode in order to obtain the final result.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="code_SPPS_principle.html" class="btn btn-neutral float-right" title="General principle" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="code_SPPS.html" class="btn btn-neutral float-left" title="Presentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Ifsttar

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>