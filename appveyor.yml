
# specify custom environment variables
environment:
  P: "c:/projects/isimpax64"
  global:
    MSVC_DEFAULT_OPTIONS: ON
    BOOST_ROOT: C:\Libraries\boost_1_60_0
    BOOST_LIBRARYDIR: C:\Libraries\boost_1_60_0\lib64-msvc-14.0
    
# branches to build
branches:
  # whitelist
  only:
    - master

# Operating system (build VM template)
os: Visual Studio 2015

# scripts that are called at very beginning, before repo cloning
init:
  - git config --global core.autocrlf input


# clone directory
clone_folder: c:\projects\isimpa

platform: x64
configuration: Release

install:
  # by default, all script lines are interpreted as batch

build:
  project: c:\projects\isimpax64\INSTALL.vcxproj      # path to Visual Studio solution or project

# scripts to run before build
before_build:
  - '"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\SetEnv.cmd" /x86'
  # sent environment variables for wxWidgets
  #- set WXWIN=C:\Libraries\wxWidgets 
  # install dependencies:
  - choco install poedit nsis wxwidgets swig -x64
  #- echo Download SWIG
  #- ps: Start-FileDownload 'https://kent.dl.sourceforge.net/project/swig/swigwin/swigwin-3.0.11/swigwin-3.0.11.zip' -FileName 'c:\Libraries\swigwin-3.0.11.zip' -Timeout 15000 
  #- ps: 7z x c:\Libraries\swigwin-3.0.11.zip -oC:\Libraries -r -y
  - ps: swig.exe -version
  - echo Running cmake...
  - cd c:\projects\isimpa
  #- set wxWidgets_ROOT_DIR=%WXWIN%
  #- set wxWidgets_LIB_DIR=%WXWIN%\lib\vc140_dll
  - cmd: SET PATH=%PATH%;C:\Program Files (x86)\Poedit\Gettexttools\bin;
  - cmake -G "Visual Studio 14 2015 Win64" -DCMAKE_INSTALL_PREFIX=%P%
  
artifacts:
  - path: 'c:\projects\isimpax64\*.exe'
    name: isimpa-win64
  
  
  